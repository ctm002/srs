<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/grid.table.css">
		<link rel="stylesheet" href="jquery/css/jquery.ui.all.css" />
		<script type="text/javascript" src="jquery/jquery-1.10.2.js"></script>
		<script type="text/javascript" src="jquery/ui/jquery.ui.core.js"></script>
		<script type="text/javascript" src="jquery/ui/jquery.ui.widget.js"></script>
		<script type="text/javascript" src="jquery/ui/jquery.ui.mouse.js"></script>
		<script type="text/javascript" src="jquery/ui/jquery.ui.resizable.js"></script>

		<script  type="text/javascript" >
			$(function(){
				var contDiv = 0;
				var doClicked = true;
				$('.tg-col-eventwrapper').click(function(e) {
					var parentOffset = $(this).offset();
					var x = e.pageX - parentOffset.left;
   					var y = e.pageY - parentOffset.top;
					
					var divHight = 22;
					var result = parseInt(y/divHight);
					console.log("fila" + result);					

					var div = $("<div/>",{
						"id": "div" + contDiv, 
						css: {
        				"top": result*divHight, "left" : 0, "border": "1px", "border-style" : "solid",
        				"position" : "absolute",
        				"width": "98%",
        				"min-width": "98%",
        				"height": "43px",
        				"margin-botton": 2,
        				"background-color": "#FFFFB8",
        				"border-color" : "#BBBBBB"
    					},
    					text:"Reservado"
					}).appendTo($(this))
					
					var divNew = $("#div" + contDiv);
					divNew.on({
						click: function(e) {
							e.stopPropagation();
							if (doClicked) {
								alert("Aqui tratamos de hacer algo")
							} else {
								doClicked = true;
							}
						}
					});

					divNew.resizable({
						containment: ".tg-col-eventwrapper",
						grid: 15,
						distance: 5,
						stop: function(event, ui){
							doClicked = false;	
						}																	
					
					});
					contDiv++; 
				});				
			});
		</script>
	</head>	
	<body style="cursor: auto;">
		<div>
			Reserva de Salas
		</div>
		<div style="display:table">
			<div style="display:table-cell">
				Menu
			</div>
			<div id="gridContainer" style="height: 800px;display:table-cell">			
				<br/>
				<br/>
				<div id="scrolltimedeventswk" class="wk-scrolltimedevents" style="height: 600px;">
					<div>
						Calendario:
					</div>
					<br/>
					<div class="tg-mainwrapper" style="margin-top:0px;">
						<table id="tgTable" class="tg-timedevents" cellpadding="0" cellspacing="0" style="height:700px" border="0px">
						<tbody>
						<tr height="1">
							<td style="width:60px">
							</td>
							<td colspan="7">
								<div class="tg-spanningwrapper">
									<div class="tg-hourmarkers">
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker" ></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>
										<div class="tg-markercell">
											<div class="tg-dualmarker"></div>
										</div>						
									<div>
								</div>
								<div class="tg-spanningwrapper tg-chipspanningwrapper" id="tgspanningwrapper">	</div>
							</td>
						</tr>
						<tr>
							<td class="tg-times-pri">						
								<div class="tg-time-pri">07:00</div>
								<div class="tg-time-pri">08:00</div>
								<div class="tg-time-pri">09:00</div>
								<div class="tg-time-pri">10:00</div>
								<div class="tg-time-pri">11:00</div>
								<div class="tg-time-pri">12:00</div>
								<div class="tg-time-pri">13:00</div>
								<div class="tg-time-pri">14:00</div>
								<div class="tg-time-pri">15:00</div>
								<div class="tg-time-pri">16:00</div>
								<div class="tg-time-pri">17:00</div>
								<div class="tg-time-pri">18:00</div>
								<div class="tg-time-pri">19:00</div>
								<div class="tg-time-pri">20:00</div>
								<div class="tg-time-pri">21:00</div>
								<div class="tg-time-pri">22:00</div>
													
							</td>
							<td class="tg-col"><div id="tgCol0" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol1" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol2" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol3" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol4" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol5" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
							<td class="tg-col"><div id="tgCol6" class="tg-col-eventwrapper" style="height:704px;margin-bottom:-704px;"></div></td>
						</tr>
						</tbody>
						</table>
					</div>			
				</div>
			</div>		
	</body>
</html>